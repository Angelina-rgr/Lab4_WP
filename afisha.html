<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Афиша</title>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <style>
        .accordion {
            background-color: #eee;
            color: #444;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            transition: 0.4s;
        }

        .active, .accordion:hover {
            background-color: #ccc;
        }

        .panel {
            padding: 0 18px;
            display: none;
            background-color: white;
            overflow: hidden;
        }
        #calendar4 {
            width: 20%;
            font: monospace;
            line-height: 1.2em;
            font-size: 15px;
            text-align: center;
        }
        #calendar4 thead tr:last-child {
            font-size: small;
            font-weight: 700;
            color: rgb(103, 103, 103);
        }
        #calendar4 tbody td {
            height: 20%;
            color: rgb(44, 86, 122);
        }
        #calendar4 tbody td:nth-child(1) {
            font-size: small;
            color: rgba(103, 103, 103, .7);
        }
        #calendar4 tbody td:nth-child(n+7), #calendar4 .holiday {
            color: rgb(231, 140, 92);
        }
        #calendar4 tbody td.today {
            outline: 3px solid red;
        }
    </style>

</head>
<body>
<h1 align="center">Афиша</h1>
<table id="calendar4" class="table" align="right">
    <thead>
    <tr><td><td colspan="4"><select>
        <option value="0">Январь</option>
        <option value="1">Февраль</option>
        <option value="2">Март</option>
        <option value="3">Апрель</option>
        <option value="4">Май</option>
        <option value="5">Июнь</option>
        <option value="6">Июль</option>
        <option value="7">Август</option>
        <option value="8">Сентябрь</option>
        <option value="9">Октябрь</option>
        <option value="10">Ноябрь</option>
        <option value="11">Декабрь</option>
    </select><td colspan="3"><input type="number" value="" min="0" max="9999" size="4">
    <tr><td><td>Пн<td>Вт<td>Ср<td>Чт<td>Пт<td>Сб<td>Вс
    <tbody>
</table>
<h2>Выберите интересующий раздел</h2>
<button class="accordion" data-toggle="tooltip" title="Список концертов">Концерты</button>
<div class="panel">
    <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Контрабас"
                        src="https://img.rl0.ru/afisha/e280x160p555x210f1123x642q85i/s3.afisha.ru/mediastorage/92/0b/cd82f05bc1d44b90bca67d900b92.jpg"
                        srcset="https://img.rl0.ru/afisha/e560x320p555x210f1123x642q65i/s3.afisha.ru/mediastorage/92/0b/cd82f05bc1d44b90bca67d900b92.jpg">
                <h3 class="mb-1">Контрабас</h3>
                <small>7 июня в 19:00</small>

            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Контрабас" data-test="3450">Купить билет</button>
            <br/>
            <p class="mb-1">Хабенский солирует в монодраме Зюскинда</p>
            <small>МХТ им. Чехова</small>

        </a>
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Баста"
                        src="https://img.rl0.ru/afisha/e280x160p0x52f810x463q85i/s5.afisha.ru/mediastorage/67/13/48ed78fbdd934803839452051367.jpg"
                        srcset="https://img.rl0.ru/afisha/e560x320p0x52f810x463q65i/s5.afisha.ru/mediastorage/67/13/48ed78fbdd934803839452051367.jpg">
                <h3 class="mb-1">Баста</h3>
                <small class="text-muted">3 июля в 19:00</small>
            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Баста" data-test="2000">Купить билет</button>
            <br/>
            <p class="mb-1">Важнейший российский рэпер</p>
            <small class="text-muted">Большая спортивная арена «Лужники»</small>

        </a>
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Mujuice"
                        src="https://img05.rl0.ru/afisha/e280x160p28x36f2504x1431q85i/s.afisha.ru/mediastorage/03/49/64a75cfe0e0e4c72a608b6b94903.jpg"
                        srcset="https://img05.rl0.ru/afisha/e560x320p28x36f2504x1431q65i/s.afisha.ru/mediastorage/03/49/64a75cfe0e0e4c72a608b6b94903.jpg">
                <h3 class="mb-1">Mujuice</h3>
                <small class="text-muted">5 июня в 20:00</small>
            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Mujuice" data-test="950">Купить билет</button>
            <br/>
            <p class="mb-1">Урбанистическая меланхолия и пестрая танцевальная электроника</p>
            <small class="text-muted">Известия Hall</small>
        </a>
    </div>
</div>

<button class="accordion" data-toggle="tooltip" title="Список выставок">Выставка</button>
<div class="panel">
    <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Альбрехт Дюрер. Шедевры гравюры"
                        src="https://img07.rl0.ru/afisha/e280x160p251x380f2310x1320q85i/s4.afisha.ru/mediastorage/ac/bf/ea5c841bce3b4490b9737475bfac.jpg"
                        srcset="https://img07.rl0.ru/afisha/e560x320p251x380f2310x1320q65i/s4.afisha.ru/mediastorage/ac/bf/ea5c841bce3b4490b9737475bfac.jpg">
                <h3 class="mb-1">Альбрехт Дюрер. Шедевры гравюры</h3>
                <small class="text-muted">28 июня</small>
            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Альбрехт Дюрер. Шедевры гравюры" data-test="750">Купить билет</button>
            <br/>
            <p class="mb-1">Более 140 подлинников «северного Леонардо да Винчи»</p>
            <small class="text-muted">Исторический музей</small>
        </a>


    </div>
</div>

<button class="accordion" data-toggle="tooltip" title="Список фильмов">Фильмы</button>
<div class="panel">
    <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Гнев человеческий"
                        src="https://img01.rl0.ru/afisha/e280x160p714x96f2624x1500q85i/s4.afisha.ru/mediastorage/4a/d5/c12e213de2e6406f91619f75d54a.jpg"
                        srcset="https://img01.rl0.ru/afisha/e560x320p714x96f2624x1500q65i/s4.afisha.ru/mediastorage/4a/d5/c12e213de2e6406f91619f75d54a.jpg">
                <h3 class="mb-1">Гнев человеческий</h3>
                <small class="text-muted">15 июня</small>
            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Гнев человеческий" data-test="550">Купить билет</button>
            <br/>
            <p class="mb-1">Воссоединение Гая Ричи и Джейсона Стэтема в триллере про инкассаторов</p>
            <small class="text-muted">Во всех кинотеатрах</small>
        </a>
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Старший сын"
                        src="https://img02.rl0.ru/afisha/e280x160p0x204f2165x1237q85i/s3.afisha.ru/mediastorage/cc/5f/52dac4b8a6124b25831e540e5fcc.jpg"
                        srcset="https://img02.rl0.ru/afisha/e560x320p0x204f2165x1237q65i/s3.afisha.ru/mediastorage/cc/5f/52dac4b8a6124b25831e540e5fcc.jpg">
                <h3 class="mb-1">Старший сын</h3>
                <small class="text-muted">9 августа в 19:30</small>
            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Старший сын" data-test="400">Купить билет</button>
            <br/>
            <p class="mb-1">Виктор Сухоруков в трогательной комедии Вампилова</p>
            <small class="text-muted">Театриум на Серпуховке</small>
        </a>
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="tooltip" title="Заказать билет">
            <div class="d-flex w-100 justify-content-between">
                <img
                        class="_2DqrS DQzWH" data-test="IMAGE" alt="Отец"
                        src="https://img02.rl0.ru/afisha/e280x160p848x46f1861x1063q85i/s5.afisha.ru/mediastorage/f7/99/c455d962010a4be293d1a3fa99f7.jpg"
                        srcset="https://img02.rl0.ru/afisha/e560x320p848x46f1861x1063q65i/s5.afisha.ru/mediastorage/f7/99/c455d962010a4be293d1a3fa99f7.jpg">
                <h3 class="mb-1">Отец</h3>
                <small class="text-muted">16 июня</small>
            </div>
            <br/>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="Отец" data-test="450">Купить билет</button>
            <br/>
            <p class="mb-1">Очередной душераздирающий перформанс Энтони Хопкинса</p>
            <small class="text-muted">Во всех кинотеатрах</small>
        </a>
    </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Билет на:</label>
                        <input type="text" class="form-control" id="recipient-name"/>
                    </div>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">ФИО:</label>
                        <input type="text" class="form-control" id="fio"/>
                    </div>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Количество билетов</label>
                        <select class="form-control" id="select-id" onchange="">
                            <option value="one">1</option>
                            <option value="two">2</option>
                            <option value="three">3</option>
                            <option value="four">4</option>
                            <option value="five">5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Цена:</label>
                        <input value="0" id="price-for-one" hidden="hidden" accept="false">
                        <input class="col-form-label" id="price-id" accept="false"/>
                    </div>

                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Комментарий:</label>
                        <textarea class="form-control" id="message-text"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="buy()">Купить</button>
            </div>
        </div>
    </div>
</div>





<script>
    function Calendar4(id, year, month) {

        Date.prototype.getWeek = function () {
            var target  = new Date(this.valueOf());
            var dayNr   = (this.getDay() + 6) % 7;
            target.setDate(target.getDate() - dayNr + 3);
            var firstThursday = target.valueOf();
            target.setMonth(0, 1);
            if (target.getDay() != 4) {
                target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7);
            }
            return 1 + Math.ceil((firstThursday - target) / 604800000);
        }

        var Dlast = new Date(year,parseFloat(month)+1,0).getDate(),
            D = new Date(year,month,Dlast),
            DNlast = D.getDay(),
            DNfirst = new Date(D.getFullYear(),D.getMonth(),1).getDay(),
            m = document.querySelector('#'+id+' option[value="' + D.getMonth() + '"]'),
            g = document.querySelector('#'+id+' input');

        if (new Date(D.getFullYear(),D.getMonth(),1).getWeek() < 10) {
            calendar = '<tr><td>0' + new Date(D.getFullYear(),D.getMonth(),1).getWeek();
        }else{
            calendar = '<tr><td>' + new Date(D.getFullYear(),D.getMonth(),1).getWeek();
        }

        if (DNfirst != 0) {
            for(var  i = 1; i < DNfirst; i++) calendar += '<td>';
        }else{
            for(var  i = 0; i < 6; i++) calendar += '<td>';
        }

        for(var  i = 1; i <= Dlast; i++) {
            if (i == new Date().getDate() && D.getFullYear() == new Date().getFullYear() && D.getMonth() == new Date().getMonth()) {
                calendar += '<td class="today">' + i;
            }else{
                if (
                    (i == 1 && D.getMonth() == 0 && ((D.getFullYear() > 1897 && D.getFullYear() < 1930) || D.getFullYear() > 1947)) ||
                    (i == 2 && D.getMonth() == 0 && D.getFullYear() > 1992) ||
                    ((i == 3 || i == 4 || i == 5 || i == 6 || i == 8) && D.getMonth() == 0 && D.getFullYear() > 2004) ||
                    (i == 7 && D.getMonth() == 0 && D.getFullYear() > 1990) ||
                    (i == 23 && D.getMonth() == 1 && D.getFullYear() > 2001) ||
                    (i == 8 && D.getMonth() == 2 && D.getFullYear() > 1965) ||
                    (i == 1 && D.getMonth() == 4 && D.getFullYear() > 1917) ||
                    (i == 9 && D.getMonth() == 4 && D.getFullYear() > 1964) ||
                    (i == 12 && D.getMonth() == 5 && D.getFullYear() > 1990) ||
                    (i == 7 && D.getMonth() == 10 && (D.getFullYear() > 1926 && D.getFullYear() < 2005)) ||
                    (i == 8 && D.getMonth() == 10 && (D.getFullYear() > 1926 && D.getFullYear() < 1992)) ||
                    (i == 4 && D.getMonth() == 10 && D.getFullYear() > 2004)
                ) {
                    calendar += '<td class="holiday">' + i;
                }else{
                    calendar += '<td>' + i;
                }
            }
            if (new Date(D.getFullYear(),D.getMonth(),i).getDay() == 0 && i != Dlast) {
                if (new Date(D.getFullYear(),D.getMonth(),i).getWeek() < 9) {
                    calendar += '<tr><td>0' + new Date(D.getFullYear(),D.getMonth(),i+1).getWeek();
                }else{
                    calendar += '<tr><td>' + new Date(D.getFullYear(),D.getMonth(),i+1).getWeek();
                }
            }
        }

        if (DNlast != 0) {
            for(var  i = DNlast; i < 7; i++) calendar += '<td>';
        }

        document.querySelector('#'+id+' tbody').innerHTML = calendar;
        g.value = D.getFullYear();
        m.selected = true;

        if (document.querySelectorAll('#'+id+' tbody tr').length < 6) {
            document.querySelector('#'+id+' tbody').innerHTML += '<tr><td>&nbsp;<td><td><td><td><td><td><td>';
        }

        document.querySelector('#'+id+' option[value="' + new Date().getMonth() + '"]').style.color = 'rgb(220, 0, 0)';

    }

    Calendar4("calendar4",new Date().getFullYear(),new Date().getMonth());
    document.querySelector('#calendar4').onchange = function Kalendar4() {
        Calendar4("calendar4",document.querySelector('#calendar4 input').value,document.querySelector('#calendar4 select').options[document.querySelector('#calendar4 select').selectedIndex].value);
    }
</script>

<div class="list-group">


    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;

        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.display === "block") {
                    panel.style.display = "none";
                } else {
                    panel.style.display = "block";
                }
            });
        }

        $('#exampleModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            var recipient = button.data('whatever')
            var price = button.data('test')
            var modal = $(this)
            modal.find('.modal-title').text('Купить билет на ' + recipient)
            document.getElementById("recipient-name").value=recipient
            document.getElementById("price-id").value=price
            document.getElementById("price-for-one").value=price
        })

        var checkbox = document.body.children[0];

        $( "select" )
            .change(function () {
                var str = "";
                $( "select option:selected" ).each(function() {
                    str = $( this ).text();
                });
                if(document.getElementById("price-for-one")!=null){
                document.getElementById("price-id").value=str*document.getElementById("price-for-one").value}
            })
            .change();

        function buy(){
            alert("Вы купили билет")
        }
    </script>





</div>
</body>
</html>